import '../../../data/models/user_model.dart';

class Challenge {
  final String id;
  final String titleKey;
  final String descKey;
  final int reward;
  final bool Function(UserModel) isCompleted;
  final String
      category; // 'streak', 'social', 'prop', 'fashion', 'background', 'growth', 'memo', 'general'
  final String group; // 같은 계열 그룹 식별자
  final int targetValue; // 달성 목표 수치
  final int Function(UserModel) getCurrentValue; // 현재 진행 수치

  const Challenge({
    required this.id,
    required this.titleKey,
    required this.descKey,
    required this.reward,
    required this.isCompleted,
    required this.category,
    required this.group,
    required this.targetValue,
    required this.getCurrentValue,
  });
}

final List<Challenge> challenges = [
  // 1. Streak Challenges
  Challenge(
    id: 'dawn_start',
    titleKey: 'challenge_dawn_start_title',
    descKey: 'challenge_dawn_start_desc',
    reward: 50,
    isCompleted: (user) => user.displayConsecutiveDays >= 1,
    category: 'streak',
    group: 'streak',
    targetValue: 1,
    getCurrentValue: (user) => user.displayConsecutiveDays,
  ),
  Challenge(
    id: 'steady_habit',
    titleKey: 'challenge_steady_habit_title',
    descKey: 'challenge_steady_habit_desc',
    reward: 100,
    isCompleted: (user) => user.displayConsecutiveDays >= 3,
    category: 'streak',
    group: 'streak',
    targetValue: 3,
    getCurrentValue: (user) => user.displayConsecutiveDays,
  ),
  Challenge(
    id: 'morning_person',
    titleKey: 'challenge_morning_person_title',
    descKey: 'challenge_morning_person_desc',
    reward: 300,
    isCompleted: (user) => user.displayConsecutiveDays >= 7,
    category: 'streak',
    group: 'streak',
    targetValue: 7,
    getCurrentValue: (user) => user.displayConsecutiveDays,
  ),
  Challenge(
    id: 'streak_14',
    titleKey: 'challenge_streak_14_title',
    descKey: 'challenge_streak_14_desc',
    reward: 500,
    isCompleted: (user) => user.displayConsecutiveDays >= 14,
    category: 'streak',
    group: 'streak',
    targetValue: 14,
    getCurrentValue: (user) => user.displayConsecutiveDays,
  ),
  Challenge(
    id: 'streak_21',
    titleKey: 'challenge_streak_21_title',
    descKey: 'challenge_streak_21_desc',
    reward: 700,
    isCompleted: (user) => user.displayConsecutiveDays >= 21,
    category: 'streak',
    group: 'streak',
    targetValue: 21,
    getCurrentValue: (user) => user.displayConsecutiveDays,
  ),
  Challenge(
    id: 'streak_30',
    titleKey: 'challenge_streak_30_title',
    descKey: 'challenge_streak_30_desc',
    reward: 1000,
    isCompleted: (user) => user.displayConsecutiveDays >= 30,
    category: 'streak',
    group: 'streak',
    targetValue: 30,
    getCurrentValue: (user) => user.displayConsecutiveDays,
  ),

  // 2. Social Challenges
  Challenge(
    id: 'friend_1',
    titleKey: 'challenge_friend_1_title',
    descKey: 'challenge_friend_1_desc',
    reward: 50,
    isCompleted: (user) => user.friendIds.isNotEmpty,
    category: 'social',
    group: 'friend',
    targetValue: 1,
    getCurrentValue: (user) => user.friendIds.length,
  ),
  Challenge(
    id: 'social_king',
    titleKey: 'challenge_social_king_title',
    descKey: 'challenge_social_king_desc',
    reward: 200,
    isCompleted: (user) => user.friendIds.length >= 5,
    category: 'social',
    group: 'friend',
    targetValue: 5,
    getCurrentValue: (user) => user.friendIds.length,
  ),
  Challenge(
    id: 'friend_10',
    titleKey: 'challenge_friend_10_title',
    descKey: 'challenge_friend_10_desc',
    reward: 400,
    isCompleted: (user) => user.friendIds.length >= 10,
    category: 'social',
    group: 'friend',
    targetValue: 10,
    getCurrentValue: (user) => user.friendIds.length,
  ),
  Challenge(
    id: 'friend_20',
    titleKey: 'challenge_friend_20_title',
    descKey: 'challenge_friend_20_desc',
    reward: 800,
    isCompleted: (user) => user.friendIds.length >= 20,
    category: 'social',
    group: 'friend',
    targetValue: 20,
    getCurrentValue: (user) => user.friendIds.length,
  ),

  // 3. Prop Collection
  Challenge(
    id: 'prop_1',
    titleKey: 'challenge_prop_1_title',
    descKey: 'challenge_prop_1_desc',
    reward: 30,
    isCompleted: (user) => user.purchasedPropIds.isNotEmpty,
    category: 'prop',
    group: 'prop',
    targetValue: 1,
    getCurrentValue: (user) => user.purchasedPropIds.length,
  ),
  Challenge(
    id: 'rich_room',
    titleKey: 'challenge_rich_room_title',
    descKey: 'challenge_rich_room_desc',
    reward: 150,
    isCompleted: (user) => user.purchasedPropIds.length >= 3,
    category: 'prop',
    group: 'prop',
    targetValue: 3,
    getCurrentValue: (user) => user.purchasedPropIds.length,
  ),
  Challenge(
    id: 'prop_5',
    titleKey: 'challenge_prop_5_title',
    descKey: 'challenge_prop_5_desc',
    reward: 300,
    isCompleted: (user) => user.purchasedPropIds.length >= 5,
    category: 'prop',
    group: 'prop',
    targetValue: 5,
    getCurrentValue: (user) => user.purchasedPropIds.length,
  ),
  Challenge(
    id: 'prop_10',
    titleKey: 'challenge_prop_10_title',
    descKey: 'challenge_prop_10_desc',
    reward: 600,
    isCompleted: (user) => user.purchasedPropIds.length >= 10,
    category: 'prop',
    group: 'prop',
    targetValue: 10,
    getCurrentValue: (user) => user.purchasedPropIds.length,
  ),

  // 4. Character Items
  Challenge(
    id: 'fashion_3',
    titleKey: 'challenge_fashion_3_title',
    descKey: 'challenge_fashion_3_desc',
    reward: 200,
    isCompleted: (user) => user.purchasedCharacterItemIds.length >= 3,
    category: 'fashion',
    group: 'fashion',
    targetValue: 3,
    getCurrentValue: (user) => user.purchasedCharacterItemIds.length,
  ),
  Challenge(
    id: 'fashion_5',
    titleKey: 'challenge_fashion_5_title',
    descKey: 'challenge_fashion_5_desc',
    reward: 400,
    isCompleted: (user) => user.purchasedCharacterItemIds.length >= 5,
    category: 'fashion',
    group: 'fashion',
    targetValue: 5,
    getCurrentValue: (user) => user.purchasedCharacterItemIds.length,
  ),

  // 5. Backgrounds
  Challenge(
    id: 'bg_1',
    titleKey: 'challenge_bg_1_title',
    descKey: 'challenge_bg_1_desc',
    reward: 100,
    isCompleted: (user) =>
        user.purchasedBackgroundIds.where((e) => e != 'none').isNotEmpty,
    category: 'background',
    group: 'background',
    targetValue: 1,
    getCurrentValue: (user) =>
        user.purchasedBackgroundIds.where((e) => e != 'none').length,
  ),
  Challenge(
    id: 'bg_3',
    titleKey: 'challenge_bg_3_title',
    descKey: 'challenge_bg_3_desc',
    reward: 300,
    isCompleted: (user) =>
        user.purchasedBackgroundIds.where((e) => e != 'none').length >= 3,
    category: 'background',
    group: 'background',
    targetValue: 3,
    getCurrentValue: (user) =>
        user.purchasedBackgroundIds.where((e) => e != 'none').length,
  ),

  // 6. Growth
  Challenge(
    id: 'level_2',
    titleKey: 'challenge_level_2_title',
    descKey: 'challenge_level_2_desc',
    reward: 100,
    isCompleted: (user) => user.characterLevel >= 2,
    category: 'growth',
    group: 'level',
    targetValue: 2,
    getCurrentValue: (user) => user.characterLevel,
  ),
  Challenge(
    id: 'level_3',
    titleKey: 'challenge_level_3_title',
    descKey: 'challenge_level_3_desc',
    reward: 200,
    isCompleted: (user) => user.characterLevel >= 3,
    category: 'growth',
    group: 'level',
    targetValue: 3,
    getCurrentValue: (user) => user.characterLevel,
  ),
  Challenge(
    id: 'level_4',
    titleKey: 'challenge_level_4_title',
    descKey: 'challenge_level_4_desc',
    reward: 350,
    isCompleted: (user) => user.characterLevel >= 4,
    category: 'growth',
    group: 'level',
    targetValue: 4,
    getCurrentValue: (user) => user.characterLevel,
  ),
  Challenge(
    id: 'level_5',
    titleKey: 'challenge_level_5_title',
    descKey: 'challenge_level_5_desc',
    reward: 500,
    isCompleted: (user) => user.characterLevel >= 5,
    category: 'growth',
    group: 'level',
    targetValue: 5,
    getCurrentValue: (user) => user.characterLevel,
  ),

  // 7. Memos
  Challenge(
    id: 'memo_1',
    titleKey: 'challenge_memo_1_title',
    descKey: 'challenge_memo_1_desc',
    reward: 30,
    isCompleted: (user) => user.memoCount >= 1,
    category: 'memo',
    group: 'memo',
    targetValue: 1,
    getCurrentValue: (user) => user.memoCount,
  ),
  Challenge(
    id: 'memo_3',
    titleKey: 'challenge_memo_3_title',
    descKey: 'challenge_memo_3_desc',
    reward: 100,
    isCompleted: (user) => user.memoCount >= 3,
    category: 'memo',
    group: 'memo',
    targetValue: 3,
    getCurrentValue: (user) => user.memoCount,
  ),
  Challenge(
    id: 'memo_10',
    titleKey: 'challenge_memo_10_title',
    descKey: 'challenge_memo_10_desc',
    reward: 300,
    isCompleted: (user) => user.memoCount >= 10,
    category: 'memo',
    group: 'memo',
    targetValue: 10,
    getCurrentValue: (user) => user.memoCount,
  ),
  Challenge(
    id: 'memo_30',
    titleKey: 'challenge_memo_30_title',
    descKey: 'challenge_memo_30_desc',
    reward: 500,
    isCompleted: (user) => user.memoCount >= 30,
    category: 'memo',
    group: 'memo',
    targetValue: 30,
    getCurrentValue: (user) => user.memoCount,
  ),

  // 8. General
  Challenge(
    id: 'diary_master',
    titleKey: 'challenge_diary_master_title',
    descKey: 'challenge_diary_master_desc',
    reward: 500,
    isCompleted: (user) => user.diaryCount >= 30,
    category: 'general',
    group: 'diary',
    targetValue: 30,
    getCurrentValue: (user) => user.diaryCount,
  ),
];
